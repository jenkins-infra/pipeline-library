
<p>
    Execute <a href="https://www.updatecli.io/updatecli" target="_blank">updatecli</a> on the repository.

    <p>
    The following arguments are available for this function:
    <ul>
      <li>String action: (Optional - Default: "diff") Updatecli action (e.g. subcommand) to execute.</li>
      <li>String config: (Optional - Default: "./updatecli/updatecli.d") path to the file or directory with the updatecli configuration (flag "--config").</li>
      <li>String values: (Optional - Default: "./updatecli/values.yaml") path to the file with the updatecli values (flag "--values").</li>
      <li>String updatecliDockerImage: (Optional - Default: "jenkinsciinfra/helmfile:2.3.0") Docker Image of updatecli to be used in the process.</li>
      <li>String cronTriggerExpression: (Optional - Default: "") Enable periodic execution by providing a cron-like expression.</li>
      <li>String containerMemory: (Optional - Default: "512Mi") specify the amount of memory dedicated to the updatecli container.</li>
      <li>String credentialsId: (Optional - Default: "github-app-updatecli-on-jenkins-infra") specify the githubApp credentials id to use to get an access token. The environment variable `UPDATECLI_GITHUB_TOKEN` holds the token value to be used within updatecli.</li>
    </ul>

    Examples:

    <pre><code>
    // Run the "updatecli diff" command
    updatecli()
    </code></pre>

    <pre><code>
    // updatecli can use the environment variable "UPDATECLI_GITHUB_TOKEN" as a token source to allow GitHub access (both API reads and PR creation)
    withCredentials([string(credentialsId: 'github-credential-with-write-access', variable: 'UPDATECLI_GITHUB_TOKEN')]) {
      updatecli(
        // Run the "updatecli apply" command
        action: "apply"
        // Configuration of updatecli is stored in the file "updatecli.yaml" at the repository's root
        config: "./updatecli.yaml",
        // No values flag to be passed
        values: "",
      )
    }

    // Note: to get an access token from a Github App instead of a Github user, you'll have to use this as credentials:
    withCredentials([usernamePassword(
      credentialsId: 'github-app-updatecli-on-jenkins-infra',
      usernameVariable: 'USERNAME_NOT_USED', // Setting this variable is mandatory, even if of no use
      passwordVariable: 'UPDATECLI_GITHUB_TOKEN'
    )]) {
      // ...
    }
    </code></pre>

    </p>
</p>

<!--
vim: ft=html
-->
